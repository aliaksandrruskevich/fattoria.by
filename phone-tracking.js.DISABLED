// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–∞–º - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø
function initPhoneTracking() {
    console.log('Phone tracking script loaded');

    var phoneLinks = document.querySelectorAll('a[href^="tel:"]');
    console.log('Found ' + phoneLinks.length + ' phone links');

    phoneLinks.forEach(function(link) {
        if (link.getAttribute('data-phone-processed')) {
            return;
        }

        link.setAttribute('data-phone-processed', 'true');

        link.addEventListener('click', function(e) {
            var phoneNumber = this.getAttribute('href').replace('tel:', '');
            
            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ë–ï–ó –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–≤–æ–Ω–∫–∞
            if (typeof ym !== 'undefined') {
                ym(105466180, 'reachGoal', 'click_phone', { number: phoneNumber });
            }
            if (typeof _mtm !== 'undefined') {
                _mtm.push({'event': 'phone_click', 'phone_number': phoneNumber});
            }

            console.log('Phone click tracked: ' + phoneNumber);
            
            // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ - —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞)
            try {
                if (typeof yaCounter105466180 !== 'undefined') {
                    yaCounter105466180.reachGoal('phone_click');
                    console.log('‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ (—Å—Ç–∞—Ä—ã–π): —Ü–µ–ª—å phone_click –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
                }
            } catch(e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (—Å—Ç–∞—Ä—ã–π):', e);
            }

            // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ - –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–¥—É–±–ª–∏—Ä—É–µ–º)
            try {
                if (typeof ym !== 'undefined') {
                    ym(105466180, 'reachGoal', 'phone_click');
                    console.log('‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ (–Ω–æ–≤—ã–π): —Ü–µ–ª—å phone_click –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
                }
            } catch(e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (–Ω–æ–≤—ã–π):', e);
            }
            
            // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - –ø–æ–∑–≤–æ–Ω–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç!
        });
    });
}

document.addEventListener('DOMContentLoaded', initPhoneTracking);
new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length) {
            initPhoneTracking();
        }
    });
}).observe(document.body, { childList: true, subtree: true });

// ============================================
// –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –ö–ù–û–ü–û–ö "–ó–ê–ö–ê–ó–ê–¢–¨" –ò "–û–°–¢–ê–í–ò–¢–¨ –ó–ê–Ø–í–ö–£"
// ============================================
(function() {
    function initOrderButtonTracking() {
        document.addEventListener('click', function(e) {
            var target = e.target;
            var text = (target.textContent || target.innerText || '').toLowerCase().trim();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–Ω–æ–ø–æ–∫ –∑–∞–∫–∞–∑–∞
            if (text.includes('–∑–∞–∫–∞–∑–∞—Ç—å') || 
                text.includes('–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É') || 
                text.includes('–ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç–µ') ||
                text.includes('–∑–∞—è–≤–∫–∞') ||
                (target.closest('button') && text.includes('–∑–∞–∫–∞–∑')) ||
                target.classList.contains('order-btn') ||
                target.classList.contains('callback-btn')) {
                
                console.log('–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–∫–∞–∑–∞:', text);
                
                // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
                try {
                    if (typeof yaCounter105466180 !== 'undefined') {
                        yaCounter105466180.reachGoal('call_order');
                        console.log('‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: —Ü–µ–ª—å call_order –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
                    }
                } catch(e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (—Å—Ç–∞—Ä—ã–π):', e);
                }
                
                // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
                try {
                    if (typeof ym !== 'undefined') {
                        ym(105466180, 'reachGoal', 'call_order');
                        console.log('‚úÖ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: —Ü–µ–ª—å call_order –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
                    }
                } catch(e) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (–Ω–æ–≤—ã–π):', e);
                }
            }
        });
        
        console.log('üéØ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∑–∞–∫–∞–∑–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ');
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initOrderButtonTracking);
    } else {
        initOrderButtonTracking();
    }
})();